<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我们如何吵架？- 恋爱冲突方式调查</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            padding: 20px;
        }
        .survey-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .question {
            margin-bottom: 30px;
        }
        .question-title {
            font-weight: bold;
            margin-bottom: 15px;
        }
        .required {
            color: red;
        }
        .section-title {
            color: #0d6efd;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #0d6efd;
        }
        .intro-text {
            background-color: #e9ecef;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        .scale-description {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-size: 0.9em;
        }
        .slider-container {
            margin: 10px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .slider {
            width: 100%;
            margin: 10px 0;
            -webkit-appearance: none;
            height: 3px;
            border-radius: 1.5px;
            background: rgba(13, 110, 253, 0.2);
            outline: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 0 2px rgba(0,0,0,0.2);
            margin-top: -6.5px;
        }
        .slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 0 2px rgba(0,0,0,0.2);
            border: none;
        }
        .slider::-webkit-slider-runnable-track {
            background: rgba(13, 110, 253, 0.2);
            height: 3px;
            border-radius: 1.5px;
        }
        .slider::-moz-range-track {
            background: rgba(13, 110, 253, 0.2);
            height: 3px;
            border-radius: 1.5px;
        }
        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.9em;
            color: #666;
            width: 100%;
        }
        .slider-value {
            text-align: center;
            font-weight: bold;
            margin-top: 5px;
            color: #0d6efd;
        }
    </style>
</head>
<body>
    <div class="survey-container">
        <h1 class="text-center mb-4">我们如何吵架？</h1>
        <h4 class="text-center mb-4">一份关于恋爱中冲突方式的小测试</h4>
        
        <div class="intro-text">
            <p>亲爱的同学，您好！</p>
            <p>本问卷旨在了解您在亲密关系中的冲突处理方式。答案无对错之分，请根据您的真实情况作答。</p>
            <p>所有数据仅用于学术研究，绝对保密。感谢您的参与！</p>
        </div>

        <form id="surveyForm">
            <h3 class="section-title">基本信息</h3>
            
            <div class="question">
                <div class="question-title">1. 你的性别：<span class="required">*</span></div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="gender" id="gender1" required>
                    <label class="form-check-label" for="gender1">男</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="gender" id="gender2">
                    <label class="form-check-label" for="gender2">女</label>
                </div>
            </div>

            <div class="question">
                <div class="question-title">2. 你的年级：<span class="required">*</span></div>
                <select class="form-select" name="grade" required>
                    <option value="">请选择</option>
                    <option value="1">大一</option>
                    <option value="2">大二</option>
                    <option value="3">大三</option>
                    <option value="4">大四</option>
                    <option value="5">研究生</option>
                    <option value="6">博士生</option>
                </select>
            </div>

            <div class="question" id="in_relationship_question">
                <div class="question-title">3. 你当下是否处在亲密关系中：<span class="required">*</span></div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="in_relationship" id="in_relationship1" value="yes" required>
                    <label class="form-check-label" for="in_relationship1">是</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="in_relationship" id="in_relationship2" value="no">
                    <label class="form-check-label" for="in_relationship2">否</label>
                </div>
            </div>

            <div class="question" id="had_relationship_question" style="display: none;">
                <div class="question-title">4. 你是否曾经有过亲密关系：<span class="required">*</span></div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="had_relationship" id="had_relationship1" value="yes">
                    <label class="form-check-label" for="had_relationship1">是</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="had_relationship" id="had_relationship2" value="no">
                    <label class="form-check-label" for="had_relationship2">否</label>
                </div>
            </div>

            <div id="relationship_questions" style="display: none;">
                <div class="question">
                    <div class="question-title">5. 你的恋爱次数：<span class="required">*</span></div>
                    <input type="number" class="form-control" name="relationship_count" min="0" required>
                </div>

                <div class="question">
                    <div class="question-title">6. 你的恋爱维持时间最长是：<span class="required">*</span></div>
                    <input type="text" class="form-control" name="longest_relationship" placeholder="例如：2年3个月" required>
                </div>

                <div class="question">
                    <div class="question-title">7. 是否经历过异地：<span class="required">*</span></div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="long_distance" id="long_distance1" value="yes" required>
                        <label class="form-check-label" for="long_distance1">是</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="long_distance" id="long_distance2" value="no">
                        <label class="form-check-label" for="long_distance2">否</label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-title">8. 你们发生冲突的频率是：<span class="required">*</span></div>
                    <input type="text" class="form-control" name="conflict_frequency" placeholder="例如：一周一次" required>
                </div>
            </div>

            <div class="scale-description">
                <h5>作答说明</h5>
                <p>请根据您的实际情况选择最符合的一项：</p>
                <p>1 = 从不，2 = 偶尔，3 = 有时，4 = 经常，5 = 总是</p>
            </div>

            <h3 class="section-title">冲突前阶段</h3>
            
            <div class="question">
                <div class="question-title">9. 当我注意到伴侣的某些行为（如长时间打游戏、熬夜）可能会引发我们的矛盾时，我会主动和TA商量是否可以一起制定新的相处规则。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q9" id="q9" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question" id="q10_container" style="display: none;">
                <div class="question-title">10. 在异地期间，我会提前和伴侣沟通联系时间，尽量避免因为联系不及时而产生误会或不快。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q10" id="q10" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">11. 当我希望伴侣改变一些行为（例如更多陪伴），我会选择不说出来，以避免可能的争执。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q11" id="q11" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">12. 如果我感到伴侣忽略了我，我通常不会表达这种感受，而是表现得和平常一样。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q12" id="q12" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">13. 当我感觉伴侣心情不好时，我倾向于避免谈及可能引起争议的话题（比如家务或约会安排）。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q13" id="q13" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question" id="q14_container" style="display: none;">
                <div class="question-title">14. 异地时，如果对方很久没有回复消息，我通常不会主动问发生了什么。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q14" id="q14" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">15. 当我做出的决定被伴侣质疑时，我会坚持自己的想法，希望对方不要再干涉。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q15" id="q15" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">16. 如果我发现伴侣和异性互动密切，我会用调侃或讽刺的语气表达我的不满。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q16" id="q16" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <h3 class="section-title">冲突中阶段</h3>

            <div class="question">
                <div class="question-title">17. 当争执升级、伴侣情绪激动时，我会尝试让对话平静下来，以便继续沟通。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q17" id="q17" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">18. 如果我们对一件事情有不同看法而无法达成一致，我会建议我们各自表达想法，再一起找一个都能接受的方案。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q18" id="q18" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">19. 如果伴侣在朋友面前指出我的问题，我会选择保持沉默，不想当场起冲突。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q19" id="q19" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">20. 在意见不合的时候，即使我并不赞同对方，我也常常选择让步以尽快结束争论。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q20" id="q20" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">21. 当争吵愈演愈烈时，我会突然转移话题或提出做别的事，希望暂时停下争执。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q21" id="q21" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">22. 当伴侣追问我真实的想法时，我常常回答得含糊其辞，不想继续深入讨论。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q22" id="q22" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">23. 在争吵中，我有时会用"你总是…"或"你从来不…"这样的表达来指出伴侣的问题。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q23" id="q23" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">24. 如果对方不同意我的观点，我会不断强调自己的立场，直到TA表现出妥协的意愿。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q24" id="q24" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <h3 class="section-title">冲突后阶段</h3>

            <div class="question">
                <div class="question-title">25. 冲突结束后，我会主动提出一起回顾这次矛盾，并思考是否可以改善我们之间的相处方式。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q25" id="q25" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">26. 即使我们已经解决了矛盾，我也会通过某些方式（如轻松的对话、约会、拥抱）来缓和可能残留的情绪。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q26" id="q26" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">27. 争吵后，我常常会反思是不是自己太挑剔，于是减少了对伴侣表达期待的次数。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q27" id="q27" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">28. 就算对方没有表示歉意，我也会主动让关系恢复平常的样子，不愿再继续讨论冲突内容。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q28" id="q28" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">29. 哪怕问题没有完全解决，我也会主动告诉对方"就这样吧"，不希望再谈这件事。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q29" id="q29" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">30. 即便我心里还有不舒服的情绪，我通常会选择自己消化而不是再次和伴侣沟通。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q30" id="q30" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">31. 就算我意识到自己有责任，我也希望对方先迈出道歉的那一步。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q31" id="q31" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-title">32. 在争吵之后，我可能会通过一些言语或行为，暗示对方应该承认错误。<span class="required">*</span></div>
                <div class="slider-container">
                    <input type="range" class="slider" name="q32" id="q32" min="1" max="5" step="1" value="3" required>
                    <div class="slider-value">3 - 有时</div>
                    <div class="slider-labels">
                        <span>1 - 从不</span>
                        <span>2 - 偶尔</span>
                        <span>3 - 有时</span>
                        <span>4 - 经常</span>
                        <span>5 - 总是</span>
                    </div>
                </div>
            </div>

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary">提交问卷</button>
            </div>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 定义维度题目映射
        const dimensionQuestions = {
            '协作': [9, 10, 17, 18, 25, 26],
            '迁就': [11, 12, 19, 20, 27, 28],
            '回避': [13, 14, 21, 22, 29, 30],
            '竞争': [15, 16, 23, 24, 31, 32]
        };

        // 更新滑动条值的显示
        function updateSliderValue(slider) {
            const value = slider.value;
            const labels = ['从不', '偶尔', '有时', '经常', '总是'];
            const valueDisplay = slider.parentElement.querySelector('.slider-value');
            valueDisplay.textContent = `${value} - ${labels[value-1]}`;
        }

        // 为所有滑动条添加事件监听器
        document.querySelectorAll('.slider').forEach(slider => {
            slider.addEventListener('input', function() {
                updateSliderValue(this);
            });
            // 初始化显示
            updateSliderValue(slider);
        });

        // 控制问题显示隐藏的逻辑
        document.addEventListener('DOMContentLoaded', function() {
            const inRelationshipInputs = document.querySelectorAll('input[name="in_relationship"]');
            const hadRelationshipInputs = document.querySelectorAll('input[name="had_relationship"]');
            const longDistanceInputs = document.querySelectorAll('input[name="long_distance"]');
            const hadRelationshipQuestion = document.getElementById('had_relationship_question');
            const relationshipQuestions = document.getElementById('relationship_questions');
            const conflictQuestions = document.querySelectorAll('.section-title, .scale-description, .question:not(#in_relationship_question):not(#had_relationship_question)');
            const submitButton = document.querySelector('button[type="submit"]');
            const q10Container = document.getElementById('q10_container');
            const q14Container = document.getElementById('q14_container');

            // 控制异地问题的显示
            function toggleLongDistanceQuestions(show) {
                q10Container.style.display = show ? '' : 'none';
                q14Container.style.display = show ? '' : 'none';
                // 更新必填属性
                const q10Input = document.getElementById('q10');
                const q14Input = document.getElementById('q14');
                q10Input.required = show;
                q14Input.required = show;
            }

            // 监听"是否经历过异地"的选择
            longDistanceInputs.forEach(input => {
                input.addEventListener('change', function() {
                    toggleLongDistanceQuestions(this.value === 'yes');
                });
            });

            // 监听"当下是否处在亲密关系中"的选择
            inRelationshipInputs.forEach(input => {
                input.addEventListener('change', function() {
                    if (this.value === 'yes') {
                        hadRelationshipQuestion.style.display = 'none';
                        relationshipQuestions.style.display = 'block';
                        showAllQuestions();
                    } else {
                        hadRelationshipQuestion.style.display = 'block';
                        relationshipQuestions.style.display = 'none';
                        hideConflictQuestions();
                    }
                });
            });

            // 监听"是否曾经有过亲密关系"的选择
            hadRelationshipInputs.forEach(input => {
                input.addEventListener('change', function() {
                    if (this.value === 'yes') {
                        relationshipQuestions.style.display = 'block';
                        showAllQuestions();
                    } else {
                        relationshipQuestions.style.display = 'none';
                        hideConflictQuestions();
                    }
                });
            });

            // 隐藏冲突相关问题
            function hideConflictQuestions() {
                conflictQuestions.forEach(element => {
                    element.style.display = 'none';
                });
                submitButton.textContent = '直接提交问卷';
            }

            // 显示所有问题
            function showAllQuestions() {
                conflictQuestions.forEach(element => {
                    element.style.display = '';
                });
                submitButton.textContent = '提交问卷';
            }

            // 初始化时隐藏冲突相关问题
            hideConflictQuestions();
        });

        // 计算维度分数
        function calculateDimensionScores(formData) {
            const scores = {
                '协作': 0,
                '迁就': 0,
                '回避': 0,
                '竞争': 0
            };

            // 计算每个维度的总分
            for (const [dimension, questions] of Object.entries(dimensionQuestions)) {
                for (const questionNum of questions) {
                    const value = formData.get(`q${questionNum}`);
                    if (value) {
                        scores[dimension] += parseInt(value);
                    }
                }
            }

            return scores;
        }

        // 获取最高分的维度
        function getHighestDimension(scores) {
            let maxScore = -1;
            let highestDimension = '';
            
            for (const [dimension, score] of Object.entries(scores)) {
                if (score > maxScore) {
                    maxScore = score;
                    highestDimension = dimension;
                }
            }

            return highestDimension;
        }

        // 表单提交逻辑
        document.getElementById('surveyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }

            // 计算维度分数
            const dimensionScores = calculateDimensionScores(formData);
            const highestDimension = getHighestDimension(dimensionScores);

            // 将维度分数添加到数据中
            data.dimensionScores = dimensionScores;

            const jsonData = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'survey_responses.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            // 显示结果
            alert(`问卷提交成功！\n\n您的冲突处理方式主要倾向于：${highestDimension}维度\n\n各维度得分：\n协作：${dimensionScores['协作']}分\n迁就：${dimensionScores['迁就']}分\n回避：${dimensionScores['回避']}分\n竞争：${dimensionScores['竞争']}分`);
            this.reset();
        });
    </script>
</body>
</html> 